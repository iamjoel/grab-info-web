<% modules.forEach(function(module){ %>
<div class="<%= module.width %> blockItem" id = "<%= module.id %>">
  <div class="panel panel-info">
      <div class="panel-heading"><%= module.name %><a class = "pull-right refreshBtn" href = "javascript:void(0);"><i class = "glyphicon glyphicon-refresh"></i></a></div>
      <div class="panel-body"><!--有js来渲染 --></div>
  </div>
</div>
<% }); %>

<script type="text/javascript">
    var LOADING_CONFIG = {
         message: '<img src="/public/images/loading.gif" />'
         ,css:{
          background:'none',
          border:'none'
         }
    }
   $(function() {
        var scriptsArr = ['/public/scripts/jquery.blockUI','/public/scripts/perfect-scrollbar.with-mousewheel.min','/public/styles/perfect-scrollbar.min.css'];
        <% modules.forEach(function(module){ %>
            scriptsArr.push('<%= "/public/modules/" + module.id + "/main.js" %>');
        <% }); %>
        seajs.use(scriptsArr,function(){
            $('.panel-body').block(LOADING_CONFIG);

            $('.panel-heading .refreshBtn').click(function(){
                var $panelBody = $(this).closest('.panel').find('.panel-body');
                $panelBody.block(LOADING_CONFIG);
            });
        });
   });
</script>

